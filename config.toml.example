[server]
host = "0.0.0.0"
port = 8081
log_level = "info"
session_secret = "change-me-to-a-random-string"
session_ttl_hours = 24

[library]
root_path = "/path/to/books"
book_extensions = ["fb2", "epub", "mobi", "pdf", "djvu", "zip"]
scan_zip = true
zip_codepage = "cp866"
inpx_enable = false

[covers]
covers_path = "/path/to/books/covers"
cover_max_dimension_px = 600  # Largest cover side in pixels; smaller images are kept unchanged
cover_jpeg_quality = 85       # JPEG quality for resized covers (1-100)
show_covers = true

[database]
url = "sqlite://ropds.db?mode=rwc"

[opds]
title = "Rust OPDS Server"
subtitle = "Personal Library"
max_items = 30
split_items = 300
auth_required = true
alphabet_menu = true
hide_doubles = true

[scanner]
schedule_minutes = [0]
schedule_hours = [0, 12]
schedule_day_of_week = []
delete_logical = false
skip_unchanged = true       # Compare mtime+size to skip unchanged archives
test_zip = false            # Validate ZIP CRC integrity before processing
test_files = false          # Verify each file extracts cleanly from archives
workers_num = 1             # Parallel scan threads (1 = sequential)

[web]
language = "en"
theme = "light"

[upload]
allow_upload = false
upload_path = "uploads"
max_upload_size_mb = 100
